# root-backup
## Утилита клонирования корневой файловой системы

Данная утилита является обёрткой команды **rsync** (Linux), и предназначена для копирования всего содержимого корневой файловой системы, в директорию, указываемую по запросу, после запуска утилиты. Исключаются из копирования все примонтированные директории и некоторые типы файлов. Таким образом, утилита позволяет сделать копию всей системы, которую впоследствии можно восстановить обратно в случае поломки системы или порчи файлов.

Код написан на языке Rust (v1.14.0) и является моим первым пробным проектиком, написанным на этом языке).

Полный вид команды, которую запускает утилита:

**sudo rsync -vaHAXS / --exclude={"/dev/","/proc/","/mnt/","/media/","/run/","/sys/","tmp/*","temp/*","cache/*",".cache/*","log","history","lost+found/*"} <введённый_путь_к_директории>/ --delete --delete-excluded**

Путь к директории указывается так:

**/директория[/директория]**

, пример: **/media/disk/backup**

-------

В папке **compiled** проекта содержатся скомпилированные с разными параметрами исполняемые файлы утилиты.
По имени папки можно определить каким образом файл скомпилирован.

Команды компиляции следующие:

**cargo main.rs build --release**

предыдущая команда + **strip root-backup**

**rustc main.rs -C lto -C opt-level=3**

предыдущая команда + **strip main**

**rustc main.rs -C prefer-dynamic -C opt-level=3**

предыдущая команда + **strip main**

После файлы были переименованы и помещены в соответствующие папки.

-------

####Возможно, в дальнейшем, дополню утилиту следующими возможностями:

Создания архива из скопированных файлов;

Замена *rsync* на нативный алгоритм копирования;

Восстановление корневой системы из скопированных файлов;

Создание ISO-образов для получения live-cd;

Возможность сетевого копирования по ssh;

GUI версия утилиты.


...
